e  <!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Registro de Aeronaves - FAB</title>
  <link rel="icon" type="image/png" href="assets/logo.png">

  <!-- Estilo global -->
  <link rel="stylesheet" href="style.css">

  <style>
    /* Fundo animado */
    body {
      position: relative;
      background: #030a18;
      color: #e0e8ff;
      overflow-x: hidden;
      font-family: 'Poppins', sans-serif;
    }
    canvas#bgParticles {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
    }
    /* Garantir que conteúdo fique acima do fundo */
    .navbar, .container, .footer {
      position: relative;
      z-index: 1;
    }

    /* Formulário de Registro */
    .registro-form {
      background: rgba(255, 255, 255, 0.05);
      border-radius: 16px;
      padding: 30px;
      max-width: 600px;
      margin: 60px auto;
      box-shadow: 0 0 25px rgba(0, 191, 255, 0.1);
      border: 1px solid rgba(0, 191, 255, 0.2);
    }
    .registro-form h2 {
      text-align: center;
      color: #00bfff;
      margin-bottom: 30px;
    }
    .registro-form label {
      display: block;
      margin-bottom: 5px;
      color: #e0e8ff;
    }
    .registro-form input, .registro-form select, .registro-form textarea {
      width: 100%;
      padding: 10px;
      margin-bottom: 15px;
      border: 1px solid #00bfff;
      border-radius: 5px;
      background: rgba(255,255,255,0.1);
      color: #e0e8ff;
      outline: none;
    }
    .file-label {
      display: inline-block;
      padding: 10px 15px;
      background: #00bfff;
      color: #030a18;
      border-radius: 5px;
      cursor: pointer;
      transition: 0.3s;
      margin-bottom: 15px;
    }
    .file-label:hover {
      background: #0099cc;
    }
    .registro-form button {
      width: 100%;
      padding: 10px;
      background: #00bfff;
      color: #030a18;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 1rem;
    }
    .registro-form button:hover {
      background: #0099cc;
    }

    /* Lista de Aeronaves Registradas */
    .aeronaves-lista {
      margin-top: 40px;
      max-width: 800px;
      margin-left: auto;
      margin-right: auto;
    }
    .aeronaves-lista h3 {
      text-align: center;
      color: #00bfff;
      margin-bottom: 20px;
    }
    .aeronave-item {
      background: rgba(255, 255, 255, 0.05);
      border-radius: 10px;
      padding: 15px;
      margin-bottom: 10px;
      border: 1px solid rgba(0, 191, 255, 0.2);
    }
    .aeronave-item p {
      margin: 5px 0;
    }

    /* Botão de excluir */
    .btn-apagar {
      padding: 5px 10px;
      border: 1px solid #ff4444;
      background: transparent;
      color: #ff4444;
      border-radius: 5px;
      cursor: pointer;
      transition: 0.3s;
    }
    .btn-apagar:hover {
      background: #ff4444;
      color: #fff;
    }
  </style>
</head>

<body>

  <!-- Fundo animado -->
  <canvas id="bgParticles"></canvas>

  <!-- Navbar -->
  <nav class="navbar">
    <div class="brand">
      <img src="fab.png" alt="logo">
      <span class="min">| Força Aérea Brasileira</span>
    </div>
    <ul class="nav-links">
      <li><a class="nav-link" href="admin.html">Registros de Alistamento</a></li>
      <li><a class="nav-link active" href="registro-aeronaves.html">Registro de Aeronaves</a></li>
    </ul>
    <button id="btnLogout" class="btn-outline-success">Sair</button>
  </nav>

  <div class="container">
    <h1 class="titulo">Registro de Aeronaves - FAB</h1>

    <div class="instructions-card" style="background: rgba(255, 255, 255, 0.05); border-radius: 10px; padding: 15px; margin-bottom: 20px; border: 1px solid rgba(0, 191, 255, 0.2);">
      <h3 style="color: #00bfff; margin-bottom: 10px;">Instruções para Registro</h3>
      <p style="font-size: 0.9em; color: #bcdcff; margin: 0; line-height: 1.6;">
        <strong>Passo 1:</strong> Preencha todos os campos do formulário com as informações da aeronave.<br>
        <strong>Passo 2:</strong> Insira a URL da foto via Discord (certifique-se de que a imagem está hospedada no Discord).<br>
        <strong>Passo 3:</strong> Clique em "Copiar para Discord" e cole a mensagem no canal apropriado do servidor.<br>
        <strong>Passo 4:</strong> Após enviar no Discord, clique em "Registrar Aeronave" para salvar no sistema.<br>
        <em>Nota: Certifique-se de que todos os campos estão preenchidos antes de registrar.</em>
      </p>
    </div>

    <form class="registro-form" id="aeronaveForm">
      <h2>Registrar Nova Aeronave</h2>
      <label for="prefixo">Prefixo:</label>
      <input type="text" id="prefixo" required>

      <label for="modelo">Modelo:</label>
      <input type="text" id="modelo" required>

      <label for="categoria">Categoria:</label>
      <input type="text" id="categoria" required>

      <label for="proprietario">Proprietário:</label>
      <input type="text" id="proprietario" required>

      <label for="dataRegistro">Data de Registro:</label>
      <input type="date" id="dataRegistro" required>

      <label for="situacao">Situação:</label>
      <select id="situacao" required>
        <option value="">Selecione</option>
        <option value="Ativa">Ativa</option>
        <option value="Suspensa">Suspensa</option>
      </select>

      <label for="fotoUrl">URL da Foto via Discord:</label>
      <input type="url" id="fotoUrl" placeholder="Insira a URL da foto" required>

      <div id="preview" style="display: none; margin-top: 20px; padding: 15px; background: rgba(255, 255, 255, 0.05); border-radius: 10px; border: 1px solid rgba(0, 191, 255, 0.2);">
        <h3 style="color: #00bfff; text-align: center;">Pré-visualização do Registro</h3>
        <p><strong>Prefixo:</strong> <span id="previewPrefixo"></span></p>
        <p><strong>Modelo:</strong> <span id="previewModelo"></span></p>
        <p><strong>Categoria:</strong> <span id="previewCategoria"></span></p>
        <p><strong>Proprietário:</strong> <span id="previewProprietario"></span></p>
        <p><strong>Data de Registro:</strong> <span id="previewDataRegistro"></span></p>
        <p><strong>Situação:</strong> <span id="previewSituacao"></span></p>
        <p><strong>Foto:</strong></p>
        <img id="previewFoto" src="" alt="Pré-visualização da Foto" style="max-width: 200px; max-height: 150px; margin: 10px 0;">
        <button type="button" id="copyDiscordBtn" style="margin-top: 15px; padding: 10px 15px; background: #7289da; color: #fff; border: none; border-radius: 5px; cursor: pointer;">Copiar para Discord</button>
      </div>

      <button type="submit">Registrar Aeronave</button>
    </form>

    <div id="successMessage" style="display: none; color: green; text-align: center; margin-top: 20px;">Aeronave registrada com sucesso!</div>

    <div class="aeronaves-lista">
      <h3>Aeronaves Registradas</h3>
      <div id="aeronavesContainer">
        <!-- Aeronaves serão adicionadas aqui dinamicamente -->
      </div>
    </div>
  </div>

  <footer class="footer">
    <p>© 2025 Força Aérea Brasileira - Servidor ABCD | Desenvolvido para fins de Roleplay</p>
  </footer>

  <script src="script.js"></script>
  <!-- Using localStorage only -->
  <script>
    // Verificar autenticação
    if (!sessionStorage.getItem('memberAuth') && !sessionStorage.getItem('adminAuth')) {
      window.location.href = 'index.html';
    }

    // Logout
    document.getElementById('btnLogout').onclick = function() {
      sessionStorage.clear();
      window.location.href = 'index.html';
    };

    // Carregar aeronaves do localStorage
    function loadAeronaves() {
      const container = document.getElementById('aeronavesContainer');
      container.innerHTML = '';
      const aeronaves = carregarAeronaves();
      aeronaves.forEach((aeronave, index) => {
        const item = document.createElement('div');
        item.className = 'aeronave-item';
        item.innerHTML = `
          <p><strong>Prefixo:</strong> ${aeronave.prefixo}</p>
          <p><strong>Modelo:</strong> ${aeronave.modelo}</p>
          <p><strong>Categoria:</strong> ${aeronave.categoria}</p>
          <p><strong>Proprietário:</strong> ${aeronave.proprietario}</p>
          <p><strong>Data de Registro:</strong> ${aeronave.dataRegistro}</p>
          <p><strong>Situação:</strong> ${aeronave.situacao}</p>
          ${aeronave.foto ? `<img src="${aeronave.foto}" alt="Foto da Aeronave" style="max-width: 200px; max-height: 150px; margin: 10px 0;">` : ''}
          <button class="btn-apagar" onclick="deleteAeronave(${index})">Excluir</button>
        `;
        container.appendChild(item);
      });
    }

    // Registrar nova aeronave
    document.getElementById('aeronaveForm').addEventListener('submit', function(e) {
      e.preventDefault();
      const prefixo = document.getElementById('prefixo').value;
      const modelo = document.getElementById('modelo').value;
      const categoria = document.getElementById('categoria').value;
      const proprietario = document.getElementById('proprietario').value;
      const dataRegistro = document.getElementById('dataRegistro').value;
      const situacao = document.getElementById('situacao').value;
      const fotoUrl = document.getElementById('fotoUrl').value;
      const registradoPor = sessionStorage.getItem('memberAuth');

      const aeronave = { prefixo, modelo, categoria, proprietario, dataRegistro, situacao, foto: fotoUrl, registradoPor };

      salvarAeronave(aeronave);
      loadAeronaves();
      document.getElementById('aeronaveForm').reset();

      // Mostrar mensagem de sucesso
      const successMessage = document.getElementById('successMessage');
      successMessage.style.display = 'block';
      setTimeout(() => {
        successMessage.style.display = 'none';
      }, 3000);
    });



    // Excluir aeronave
    function deleteAeronave(index) {
      if (confirm("Tem certeza que deseja excluir esta aeronave?")) {
        deletarAeronave(index);
        loadAeronaves();
      }
    }

    // Carregar ao iniciar
    loadAeronaves();

    // Função para atualizar pré-visualização
    function updatePreview() {
      const prefixo = document.getElementById('prefixo').value;
      const modelo = document.getElementById('modelo').value;
      const categoria = document.getElementById('categoria').value;
      const proprietario = document.getElementById('proprietario').value;
      const dataRegistro = document.getElementById('dataRegistro').value;
      const situacao = document.getElementById('situacao').value;
      const fotoUrl = document.getElementById('fotoUrl').value;

      if (prefixo && modelo && categoria && proprietario && dataRegistro && situacao && fotoUrl) {
        document.getElementById('previewPrefixo').textContent = prefixo;
        document.getElementById('previewModelo').textContent = modelo;
        document.getElementById('previewCategoria').textContent = categoria;
        document.getElementById('previewProprietario').textContent = proprietario;
        document.getElementById('previewDataRegistro').textContent = dataRegistro;
        document.getElementById('previewSituacao').textContent = situacao;
        document.getElementById('previewFoto').src = fotoUrl;
        document.getElementById('preview').style.display = 'block';
      } else {
        document.getElementById('preview').style.display = 'none';
      }
    }

    // Adicionar event listeners para atualizar pré-visualização
    document.getElementById('prefixo').addEventListener('input', updatePreview);
    document.getElementById('modelo').addEventListener('input', updatePreview);
    document.getElementById('categoria').addEventListener('input', updatePreview);
    document.getElementById('proprietario').addEventListener('input', updatePreview);
    document.getElementById('dataRegistro').addEventListener('input', updatePreview);
    document.getElementById('situacao').addEventListener('change', updatePreview);
    document.getElementById('fotoUrl').addEventListener('input', updatePreview);

    // Botão copiar para Discord
    document.getElementById('copyDiscordBtn').addEventListener('click', function() {
      const prefixo = document.getElementById('previewPrefixo').textContent;
      const modelo = document.getElementById('previewModelo').textContent;
      const categoria = document.getElementById('previewCategoria').textContent;
      const proprietario = document.getElementById('previewProprietario').textContent;
      const dataRegistro = document.getElementById('previewDataRegistro').textContent;
      const situacao = document.getElementById('previewSituacao').textContent;
      const fotoUrl = document.getElementById('previewFoto').src;

      const discordMessage = `**Novo Registro de Aeronave**\n\n**Prefixo:** ${prefixo}\n**Modelo:** ${modelo}\n**Categoria:** ${categoria}\n**Proprietário:** ${proprietario}\n**Data de Registro:** ${dataRegistro}\n**Situação:** ${situacao}\n**Foto:** ${fotoUrl}`;

      navigator.clipboard.writeText(discordMessage).then(() => {
        alert('Mensagem copiada para o Discord!');
      }).catch(err => {
        console.error('Erro ao copiar: ', err);
        alert('Erro ao copiar a mensagem.');
      });
    });

  </script>

  <!-- Script das partículas -->
  <script>
    const canvas = document.getElementById('bgParticles');
    const ctx = canvas.getContext('2d');
    let particlesArray;

    function resizeCanvas() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    }
    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();

    class Particle {
      constructor() {
        this.x = Math.random() * canvas.width;
        this.y = Math.random() * canvas.height;
        this.size = Math.random() * 3 + 1;
        this.speedX = Math.random() * 1 - 0.5;
        this.speedY = Math.random() * 1 - 0.5;
      }
      update() {
        this.x += this.speedX;
        this.y += this.speedY;
        if (this.x > canvas.width) this.x = 0;
        if (this.x < 0) this.x = canvas.width;
        if (this.y > canvas.height) this.y = 0;
        if (this.y < 0) this.y = canvas.height;
      }
      draw() {
        ctx.fillStyle = 'rgba(0,191,255,0.7)';
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.size, 0, Math.PI*2);
        ctx.fill();
      }
    }

    function initParticles() {
      particlesArray = [];
      for(let i = 0; i < 100; i++) {
        particlesArray.push(new Particle());
      }
    }

    function animate() {
      ctx.clearRect(0,0,canvas.width,canvas.height);
      particlesArray.forEach(p => { p.update(); p.draw(); });
      requestAnimationFrame(animate);
    }

    initParticles();
    animate();
  </script>

</body>
</html>
